[
    {
        "content": "<p>Hey <span class=\"user-mention\" data-user-id=\"256663\">@Joseph Flatt</span> <span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span> ...I came across <a href=\"https://www.drupal.org/project/ideas/issues/3090894\" target=\"_blank\" title=\"https://www.drupal.org/project/ideas/issues/3090894\">https://www.drupal.org/project/ideas/issues/3090894</a> the other day, and also <a href=\"https://www.drupal.org/project/cssvars\" target=\"_blank\" title=\"https://www.drupal.org/project/cssvars\">https://www.drupal.org/project/cssvars</a> (<a href=\"https://caniuse.com/#feat=css-variables\" target=\"_blank\" title=\"https://caniuse.com/#feat=css-variables\">https://caniuse.com/#feat=css-variables</a>) ...interested to hear what you think, and how that compares to the Color module implementation in Backdrop.</p>",
        "id": 190140344,
        "sender_full_name": "klonos",
        "timestamp": 1583812103
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256729\">@klonos</span> I haven't heard of that module, but when you mention Color module and CSS variables, my ears prick up... I'm currently working on an admin theme for Backdrop which allows you to change colour schemes, but since I didn't understand/like Color module I am using CSS variables instead. I thought about also releasing a proof-of-concept theme with basic variables to show how they could replace Color module (since my theme uses more advanced version), but haven't gotten around to it...</p>",
        "id": 190143120,
        "sender_full_name": "BWPanda",
        "timestamp": 1583817607
    },
    {
        "content": "<p>Good that I brought this up then <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span> . We may still be able to keep the UI (and possibly BC?), while at the same time clean up the code and refactor things to be more robust (if that means better DX for themers that is).</p>",
        "id": 190144531,
        "sender_full_name": "klonos",
        "timestamp": 1583820124
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256607\">@BWPanda (Peter)</span> did you see my port of Adminimal?</p>",
        "id": 190165776,
        "sender_full_name": "docwilmot",
        "timestamp": 1583842947
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256757\">@docwilmot</span> Nope, going to look now though <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>",
        "id": 190166869,
        "sender_full_name": "BWPanda",
        "timestamp": 1583843893
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256757\">@docwilmot</span> Do you mean you used CSS variables in Adminimal, or just that you ported an admin theme...?</p>",
        "id": 190167315,
        "sender_full_name": "BWPanda",
        "timestamp": 1583844257
    },
    {
        "content": "<p>The latter</p>",
        "id": 190167594,
        "sender_full_name": "docwilmot",
        "timestamp": 1583844510
    },
    {
        "content": "<p>I have not seen that module before, but I have spent some time trying to come up with a better way for themers to provide settings for people without breaking backwards compatibility. I think the biggest improvement we could do with a low amount of effort would be allowing themes to provide configuration files, <a href=\"https://github.com/backdrop/backdrop-issues/issues/2554\" target=\"_blank\" title=\"https://github.com/backdrop/backdrop-issues/issues/2554\">https://github.com/backdrop/backdrop-issues/issues/2554</a>. That would make it more consistent with other ways of providing settings instead of this special system that is only used for color module.</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/backdrop/backdrop-issues/issues/2554\" style=\"background-image: url(https://avatars3.githubusercontent.com/u/5283039?s=400&amp;v=4)\" target=\"_blank\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/backdrop/backdrop-issues/issues/2554\" target=\"_blank\" title=\"Use config for color module palettes · Issue #2554 · backdrop/backdrop-issues\">Use config for color module palettes · Issue #2554 · backdrop/backdrop-issues</a></div><div class=\"message_embed_description\">Color module uses an array in a color.inc file to store palettes. If we used config, people could import new palettes to their themes, have multiple custom palettes, and easily export color setting...</div></div></div>",
        "id": 190311532,
        "sender_full_name": "Joseph Flatt",
        "timestamp": 1583949119
    },
    {
        "content": "<p>I have also thought about just making a new module to replace it that could support more than colors.</p>",
        "id": 190311655,
        "sender_full_name": "Joseph Flatt",
        "timestamp": 1583949186
    },
    {
        "content": "<p>I believe that the color module should work with css variables already. Because it does a complete rewrite of the stylesheet swapping out the color codes, you can make a stylesheet with all your variable definitions and then use those everywhere else just like you normally would.</p>",
        "id": 190311968,
        "sender_full_name": "Joseph Flatt",
        "timestamp": 1583949359
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256607\">@BWPanda (Peter)</span> There is also <a href=\"https://github.com/backdrop/backdrop-issues/issues/3348\" target=\"_blank\" title=\"https://github.com/backdrop/backdrop-issues/issues/3348\">https://github.com/backdrop/backdrop-issues/issues/3348</a> which has been marked RTBC for a couple months that makes it much easier to setup color module and makes a few things fill in safe defaults instead of just throwing errors like they did before.</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/backdrop/backdrop-issues/issues/3348\" style=\"background-image: url(https://avatars3.githubusercontent.com/u/5283039?s=400&amp;v=4)\" target=\"_blank\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/backdrop/backdrop-issues/issues/3348\" target=\"_blank\" title=\"[UX][DX] Color Module Support is not inherited by child theme · Issue #3348 · backdrop/backdrop-issues\">[UX][DX] Color Module Support is not inherited by child theme · Issue #3348 · backdrop/backdrop-issues</a></div><div class=\"message_embed_description\">Not sure if this should be a thing, but I found it surprising. So in a session at BADCamp, @sethlbrown made a child theme from Basis, then went to see if color support worked, and it didn&#39;t. It...</div></div></div>",
        "id": 190312992,
        "sender_full_name": "Joseph Flatt",
        "timestamp": 1583949877
    },
    {
        "content": "<p>Thanks for reminding me about <a href=\"https://github.com/backdrop/backdrop-issues/issues/2554\" target=\"_blank\" title=\"https://github.com/backdrop/backdrop-issues/issues/2554\">#2554</a> <span class=\"user-mention\" data-user-id=\"256663\">@Joseph Flatt</span>  ...I have totally forgotten about that <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/backdrop/backdrop-issues/issues/2554\" style=\"background-image: url(https://avatars3.githubusercontent.com/u/5283039?s=400&amp;v=4)\" target=\"_blank\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/backdrop/backdrop-issues/issues/2554\" target=\"_blank\" title=\"Use config for color module palettes · Issue #2554 · backdrop/backdrop-issues\">Use config for color module palettes · Issue #2554 · backdrop/backdrop-issues</a></div><div class=\"message_embed_description\">Color module uses an array in a color.inc file to store palettes. If we used config, people could import new palettes to their themes, have multiple custom palettes, and easily export color setting...</div></div></div>",
        "id": 190314573,
        "sender_full_name": "klonos",
        "timestamp": 1583950778
    },
    {
        "content": "<p>Yeah, I marked it as RTBC. Perhaps <span class=\"user-mention\" data-user-id=\"256607\">@BWPanda (Peter)</span> wants to commit it?</p>",
        "id": 190317219,
        "sender_full_name": "Herb",
        "timestamp": 1583952393
    },
    {
        "content": "<p>I took a look at it earlier today, but didn't quite understand it. And I'm hesitant to commit something I don't understand...</p>",
        "id": 190317551,
        "sender_full_name": "BWPanda",
        "timestamp": 1583952591
    },
    {
        "content": "<p>I hear ya.  I guess we can leave it for <span class=\"user-mention\" data-user-id=\"258586\">@Nate Lampton</span> or <span class=\"user-mention\" data-user-id=\"256757\">@docwilmot</span></p>",
        "id": 190318306,
        "sender_full_name": "Herb",
        "timestamp": 1583953050
    },
    {
        "content": "<p>There have been a few other commits I've made though, and a lot of my confidence has come from your RTBC review. So <span class=\"user-mention\" data-user-id=\"256705\">@Herb</span> ++ for that! <span aria-label=\"smile\" class=\"emoji emoji-263a\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 190319699,
        "sender_full_name": "BWPanda",
        "timestamp": 1583953811
    },
    {
        "content": "<p><strong>herb</strong> Props to you for all your hard work. (Karma: 4)</p>",
        "id": 190319700,
        "sender_full_name": "Dragonbot",
        "timestamp": 1583953811
    },
    {
        "content": "<p>Part of the problem that makes the Color module's code confusing is that it's doing color transformation two different ways, and it's not clear based on the documentation or the comments which code is doing which.</p>",
        "id": 190322808,
        "sender_full_name": "oadaeh (Jason Flatt)",
        "timestamp": 1583955719
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"256705\">Herb</span> <a href=\"#narrow/stream/218635-General/topic/ColorNG/near/190318306\" title=\"#narrow/stream/218635-General/topic/ColorNG/near/190318306\">said</a>:</p>\n<blockquote>\n<p>I hear ya.  I guess we can leave it for <span class=\"user-mention silent\" data-user-id=\"258586\">Nate Lampton</span> or <span class=\"user-mention silent\" data-user-id=\"256757\">docwilmot</span></p>\n</blockquote>\n<p>I'm not a committer by the way.</p>",
        "id": 190340948,
        "sender_full_name": "docwilmot",
        "timestamp": 1583967229
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256664\">@Luke McCormick</span> <span class=\"user-mention\" data-user-id=\"256570\">@StPaulTim</span> <span class=\"user-mention\" data-user-id=\"263951\">@Jen Lampton</span> this is the discussion thread ...in case you guys missed it.</p>",
        "id": 190436927,
        "sender_full_name": "klonos",
        "timestamp": 1584042915
    },
    {
        "content": "<p>...and here's the short demo video I was referring to: <a href=\"https://vimeo.com/370081150\" target=\"_blank\" title=\"https://vimeo.com/370081150\">Vimeo - Merlin's Minute Modules: CSS Variables</a></p>\n<div class=\"embed-video message_inline_image\"><a data-id=\"&lt;iframe src=&quot;https://player.vimeo.com/video/370081150?app_id=122963&quot; width=&quot;640&quot; height=&quot;360&quot; frameborder=&quot;0&quot; allow=&quot;autoplay; fullscreen&quot; allowfullscreen title=&quot;Merlin&amp;#039;s Minute Modules: CSS Variables&quot;&gt;&lt;/iframe&gt;\" href=\"https://vimeo.com/370081150\" target=\"_blank\" title=\"Merlin's Minute Modules: CSS Variables\"><img src=\"https://i.vimeocdn.com/video/827205250_640.jpg\"></a></div>",
        "id": 190437770,
        "sender_full_name": "klonos",
        "timestamp": 1584043377
    },
    {
        "content": "<p>^^ showing how any CSS variables (not only color, but also font size etc.) are semi-auto-magically exposed as form elements in the admin UI, for the theme tinkerer to play with.</p>",
        "id": 190437972,
        "sender_full_name": "klonos",
        "timestamp": 1584043486
    },
    {
        "content": "<p>Make this as a demo of using CSS variables to provide simple color support: <a href=\"https://github.com/backdrop-contrib/color_variables\" target=\"_blank\" title=\"https://github.com/backdrop-contrib/color_variables\">https://github.com/backdrop-contrib/color_variables</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/backdrop-contrib/color_variables\" style=\"background-image: url(https://avatars1.githubusercontent.com/u/7720679?s=400&amp;v=4)\" target=\"_blank\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/backdrop-contrib/color_variables\" target=\"_blank\" title=\"backdrop-contrib/color_variables\">backdrop-contrib/color_variables</a></div><div class=\"message_embed_description\">A theme that demonstrates how to use CSS variables to provide simple color support. - backdrop-contrib/color_variables</div></div></div>",
        "id": 190441275,
        "sender_full_name": "BWPanda",
        "timestamp": 1584045065
    },
    {
        "content": "<p><a href=\"/user_uploads/18319/MvpWjsXiIxshM0x9rPJDUvLz/Peek-2020-03-12-22-33.gif\" target=\"_blank\" title=\"Peek-2020-03-12-22-33.gif\">Peek-2020-03-12-22-33.gif</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/18319/MvpWjsXiIxshM0x9rPJDUvLz/Peek-2020-03-12-22-33.gif\" target=\"_blank\" title=\"Peek-2020-03-12-22-33.gif\"><img src=\"/user_uploads/18319/MvpWjsXiIxshM0x9rPJDUvLz/Peek-2020-03-12-22-33.gif\"></a></div>",
        "id": 190441490,
        "sender_full_name": "BWPanda",
        "timestamp": 1584045203
    },
    {
        "content": "<p>I just released Lumi: <a href=\"https://github.com/backdrop-contrib/lumi\" target=\"_blank\" title=\"https://github.com/backdrop-contrib/lumi\">https://github.com/backdrop-contrib/lumi</a> It's an admin theme I've been working on that uses CSS variables instead of the Color module. Part of the reason I created it was to provide a dark mode for Backdrop, but unfortunately that's on hold due to the extent of the changes required and my lack of design skills. So just releasing this as a customisable admin theme instead for now...</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/backdrop-contrib/lumi\" style=\"background-image: url(https://avatars1.githubusercontent.com/u/7720679?s=400&amp;v=4)\" target=\"_blank\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/backdrop-contrib/lumi\" target=\"_blank\" title=\"backdrop-contrib/lumi\">backdrop-contrib/lumi</a></div><div class=\"message_embed_description\">A customisable admin theme that lets you select from various colour schemes. - backdrop-contrib/lumi</div></div></div>",
        "id": 190479825,
        "sender_full_name": "BWPanda",
        "timestamp": 1584087238
    },
    {
        "content": "<p>The Color Variables demo I created yesterday was a trimmed copy of Lumi as I thought I wasn't going to release Lumi for a while yet but wanted to show people how I'm using CSS variables. But Lumi's now released and is a better example of that.</p>",
        "id": 190479962,
        "sender_full_name": "BWPanda",
        "timestamp": 1584087335
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"256607\">@BWPanda (Peter)</span> <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> ...as already mentioned before, at some point I would like us to see how much we could reduce complexity for themers, if we adopted the CSS variables method in general.</p>",
        "id": 190482874,
        "sender_full_name": "klonos",
        "timestamp": 1584090173
    },
    {
        "content": "<p>So, I took a look at Merlin's ColorNG and at Lumi, and I have some concerns with them.</p>\n<p>First, you are already able to use CSS variables in a theme and also use the Color module. None of these implementations make CSS variables an option, they make them a requirement. Any theme that currently doesn't use CSS variables will have to be rewritten in order to use the new version of the Color module.</p>\n<p>Second, CSS variables are not supported in any version of Internet Explorer.  Since this would make CSS variables a requirement to use the Color module, anyone who cared about IE support would have to include a polyfill on their site to use the CSS variables, which seems like unnecessary overhead when it worked just fine for that use case before.</p>\n<p>I think we can certainly use some improvements and cleanup in the Color module, but I think that making it even more opinionated about your theme is a bad idea and we should be careful about it. If our goal is to have more contributed themes available for low end site, then breaking the ones we already have seems counter productive.</p>",
        "id": 190536750,
        "sender_full_name": "Joseph Flatt",
        "timestamp": 1584122934
    },
    {
        "content": "<p>I will try to spend some time today or tomorrow on a more comprehensive write up about ways I think we can improve the Color module without breaking existing themes.</p>",
        "id": 190536997,
        "sender_full_name": "Joseph Flatt",
        "timestamp": 1584123095
    },
    {
        "content": "<p>Agreed re the IE lacking support and the polyfill requirement (don't you just love Microsoft? <span aria-label=\"rolling eyes\" class=\"emoji emoji-1f644\" role=\"img\" title=\"rolling eyes\">:rolling_eyes:</span>) ...although the newer versions of the Edge browser are using Chromium, so this might as well be a non-issue. But CSS variables do not need to be enforced (hence no theme rewriting required in contrib) - only supported as an alternative/opt-in. We'd simply start using them instead of the current method - but only if it improves DX, lowers the learning curve, reduces code amount/complexity etc. ...eventually (Backdrop 2.0?) we <strong>may</strong> decide to stick with CSS variables if they have been proven to be easier/better, and deprecate the \"old\" way. My 2c</p>",
        "id": 190540274,
        "sender_full_name": "klonos",
        "timestamp": 1584124863
    },
    {
        "content": "<p>...the features that seem handy which I'm interested in are:</p>\n<ul>\n<li>moving color settings to proper config files instead of <code>color.inc</code> (<a href=\"https://github.com/backdrop/backdrop-issues/issues/2554\" target=\"_blank\" title=\"https://github.com/backdrop/backdrop-issues/issues/2554\">#2554</a>)</li>\n<li>auto-detection of CSS variables as theme settings, and auto-magic, on-the-fly creation of the settings form for them</li>\n</ul>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/backdrop/backdrop-issues/issues/2554\" style=\"background-image: url(https://avatars3.githubusercontent.com/u/5283039?s=400&amp;v=4)\" target=\"_blank\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/backdrop/backdrop-issues/issues/2554\" target=\"_blank\" title=\"Use config for color module palettes · Issue #2554 · backdrop/backdrop-issues\">Use config for color module palettes · Issue #2554 · backdrop/backdrop-issues</a></div><div class=\"message_embed_description\">Color module uses an array in a color.inc file to store palettes. If we used config, people could import new palettes to their themes, have multiple custom palettes, and easily export color setting...</div></div></div>",
        "id": 190540704,
        "sender_full_name": "klonos",
        "timestamp": 1584125118
    },
    {
        "content": "<p>I'm not making any comments about the future of the Color module. My comments above were simply to show that I was making a theme, wanted the ability to provide colour schemes, didn't like Color module, found CSS variables and so used them instead. It's just meant to show themers that there are other ways should they find Color module hard to use or not suited to them.</p>",
        "id": 190541085,
        "sender_full_name": "BWPanda",
        "timestamp": 1584125326
    },
    {
        "content": "<p>Yup, that's the idea indeed.</p>",
        "id": 190541129,
        "sender_full_name": "klonos",
        "timestamp": 1584125359
    },
    {
        "content": "<p>...I believe that if both methods are supported, then eventually over time we'll get a feeling of what people prefer as the easiest to work with.</p>",
        "id": 190541250,
        "sender_full_name": "klonos",
        "timestamp": 1584125416
    },
    {
        "content": "<p>...and we don't have to deprecate the \"old way\" at all, if we want to maintain backwards compatibility. Similar to your idea in <a href=\"https://github.com/backdrop/backdrop-issues/issues/2554#issuecomment-454549793\" target=\"_blank\" title=\"https://github.com/backdrop/backdrop-issues/issues/2554#issuecomment-454549793\">https://github.com/backdrop/backdrop-issues/issues/2554#issuecomment-454549793</a> <span class=\"user-mention\" data-user-id=\"256663\">@Joseph Flatt</span></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/backdrop/backdrop-issues/issues/2554#issuecomment-454549793\" style=\"background-image: url(https://avatars3.githubusercontent.com/u/5283039?s=400&amp;v=4)\" target=\"_blank\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/backdrop/backdrop-issues/issues/2554#issuecomment-454549793\" target=\"_blank\" title=\"Use config for color module palettes · Issue #2554 · backdrop/backdrop-issues\">Use config for color module palettes · Issue #2554 · backdrop/backdrop-issues</a></div><div class=\"message_embed_description\">Color module uses an array in a color.inc file to store palettes. If we used config, people could import new palettes to their themes, have multiple custom palettes, and easily export color setting...</div></div></div>",
        "id": 190541343,
        "sender_full_name": "klonos",
        "timestamp": 1584125490
    },
    {
        "content": "<blockquote>\n<p>With this change, we could also mark the usage of <code>color.inc</code> as deprecated and themers could put their color settings in the .info file like any other theme setting.</p>\n</blockquote>",
        "id": 190541437,
        "sender_full_name": "klonos",
        "timestamp": 1584125525
    }
]
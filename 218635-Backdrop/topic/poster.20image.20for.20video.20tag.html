---
layout: archive
title: Zulip Chat Archive
permalink: /stream/218635-Backdrop/topic/poster.20image.20for.20video.20tag.html
---

<h2>Stream: <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/index.html">Backdrop</a></h2>
<h3>Topic: <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/poster.20image.20for.20video.20tag.html">poster image for video tag</a></h3>

<hr>

<base href="backdrop.zulipchat.com">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="203284244"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/poster%20image%20for%20video%20tag/near/203284244" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Garrigos <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/poster.20image.20for.20video.20tag.html#203284244">(Jul 08 2020 at 15:46)</a>:</h4>
<p>I'm looking for ways to add a poster image to a video tag. Anyone found in this same situation? Best approaches? Any contrib module? Will ever be added to core?</p>



<a name="203353741"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/poster%20image%20for%20video%20tag/near/203353741" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> indigoxela <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/poster.20image.20for.20video.20tag.html#203353741">(Jul 09 2020 at 06:16)</a>:</h4>
<p>What sort of video? Remote (third party service) or local upload? In a file field or a tag via ckeditor in content? File entities are fieldable - that could be helpful if it's about local (uploaded) files and there's a module for that (at least one).</p>



<a name="203446051"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/poster%20image%20for%20video%20tag/near/203446051" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Garrigos <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/poster.20image.20for.20video.20tag.html#203446051">(Jul 09 2020 at 21:53)</a>:</h4>
<p>Local upload. Backdrop supports the html5 video tag by default, but there is no way to add a poster to that tag (other than hacking the theme_file_video() function). It would be great to be able to have an image field which could be used as poster and set that on a field formatter. I couldn't see any module for that. is it?</p>



<a name="203494451"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/poster%20image%20for%20video%20tag/near/203494451" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> indigoxela <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/poster.20image.20for.20video.20tag.html#203494451">(Jul 10 2020 at 11:10)</a>:</h4>
<p>I suggest to use file entities. Here's a module that uses placeholders - <a href="https://backdropcms.org/project/feef">File Entity Embed Filter</a>. The way how these entities get rendered is fully configurable via the view mode. Go to /admin/structure/file-types/manage/video/fields and add your image field first.</p>



<a name="203542582"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/poster%20image%20for%20video%20tag/near/203542582" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Garrigos <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/poster.20image.20for.20video.20tag.html#203542582">(Jul 10 2020 at 18:35)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="256738">@indigoxela</span> I tried to work with adding a poster field to the file entity, but I don't find it very useful. First, you need to go to manage the file to add the poster, which is not very nice as UX. then, I have not figured out how to add that image as poster to the video tag. Is not so straightforward. :-(</p>



<a name="203589063"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/poster%20image%20for%20video%20tag/near/203589063" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> indigoxela <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/poster.20image.20for.20video.20tag.html#203589063">(Jul 11 2020 at 09:34)</a>:</h4>
<p><span class="user-mention" data-user-id="300022">@Robert Garrigos</span> I see. So you don't have a custom theme to provide customized template files, you're trying to achieve it with core or custom modules alone...<br>
Hm, do you know any D7 module that provides what you need? I'm not aware of one, but that doesn't mean there isn't any. If so, we could port that or relevant parts of it to Backdrop core or contrib.</p>



<a name="203589734"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/poster%20image%20for%20video%20tag/near/203589734" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Garrigos <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/poster.20image.20for.20video.20tag.html#203589734">(Jul 11 2020 at 09:59)</a>:</h4>
<p>I do have a custom theme but:</p>
<ol>
<li>I don't see the way to get the file entity extra field info from within the theme_file_video() function, where I could add the poster attribute to the video tag.</li>
<li>In any case, having to go to manage the file in order to add a poster, and not from within the node edition form, is not very useful.</li>
</ol>
<p>I did look for a drupal module and was unsuccessful.</p>



<a name="203596497"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/poster%20image%20for%20video%20tag/near/203596497" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> indigoxela <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/poster.20image.20for.20video.20tag.html#203596497">(Jul 11 2020 at 13:22)</a>:</h4>
<p>Hm. If you do have a custom theme, then it's simple to override any theme function in your template.php. Or am I missing something?</p>
<p>An example:</p>
<div class="codehilite"><pre><span></span><code>/**
 * Overrides theme_file_video() to add poster attributte.
 */
function YOURTHEME_file_video($variables) {
  $files = $variables[&#39;files&#39;];
  $output = &#39;&#39;;

  $video_attributes = array();
  if ($variables[&#39;controls&#39;]) {
    $video_attributes[&#39;controls&#39;] = &#39;controls&#39;;
  }
  if ($variables[&#39;autoplay&#39;]) {
    $video_attributes[&#39;autoplay&#39;] = &#39;autoplay&#39;;
  }
  if ($variables[&#39;loop&#39;]) {
    $video_attributes[&#39;loop&#39;] = &#39;loop&#39;;
  }
  if ($variables[&#39;muted&#39;]) {
    $video_attributes[&#39;muted&#39;] = &#39;muted&#39;;
  }
  if ($variables[&#39;width&#39;]) {
    $video_attributes[&#39;width&#39;] = $variables[&#39;width&#39;];
  }
  if ($variables[&#39;height&#39;]) {
    $video_attributes[&#39;height&#39;] = $variables[&#39;height&#39;];
  }
  if (!empty($variables[&#39;preload&#39;])) {
    $video_attributes[&#39;preload&#39;] = $variables[&#39;preload&#39;];
  }

  foreach ($files as $delta =&gt; $file) {
    $source_attributes = array(
      &#39;src&#39; =&gt; file_create_url($file[&#39;uri&#39;]),
      &#39;type&#39; =&gt; $file[&#39;filemime&#39;],
    );
    $source = &#39;&lt;source&#39; . backdrop_attributes($source_attributes) . &#39; /&gt;&#39;;
    // Add poster image.
    if (!empty($file[&#39;field_poster&#39;][LANGUAGE_NONE][0])) {
      $poster_uri = $file[&#39;field_poster&#39;][LANGUAGE_NONE][0][&#39;uri&#39;];
      $video_attributes[&#39;poster&#39;] = file_create_url($poster_uri);
    }
  }
  $output = &#39;&lt;video&#39; . backdrop_attributes($video_attributes) . &#39;&gt;&#39;;
  $output .= $source;
  $output .= &#39;&lt;/video&gt;&#39;;
  return $output;
}
</code></pre></div>


<p>This adds a poster attribute taken from an image field (image "field_poster" is attached to the video file entity).</p>
<p>If unsure, compare it with the <a href="https://github.com/backdrop/backdrop/blob/c98bf5148875a4e829754d30afd940d79c8ee87f/core/modules/file/file.theme.inc#L485">original theme function</a>. The difference isn't that big.</p>
<p>Note: this was just a quick proof of concept and probably could be tweaked.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/backdrop/backdrop/blob/c98bf5148875a4e829754d30afd940d79c8ee87f/core/modules/file/file.theme.inc#L485" style="background-image: url(https://avatars3.githubusercontent.com/u/5283039?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/backdrop/backdrop/blob/c98bf5148875a4e829754d30afd940d79c8ee87f/core/modules/file/file.theme.inc#L485" title="backdrop/backdrop">backdrop/backdrop</a></div><div class="message_embed_description">Backdrop core code repository. Contribute to backdrop/backdrop development by creating an account on GitHub.</div></div></div>



<a name="203732381"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/poster%20image%20for%20video%20tag/near/203732381" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Garrigos <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/poster.20image.20for.20video.20tag.html#203732381">(Jul 13 2020 at 15:50)</a>:</h4>
<p>right, that's the theme function. I wasn't aware of the file variable. Yep, that would do it. Thanks :-)</p>



{% endraw %}

<hr><p>Last updated: Apr 05 2021 at 23:47 UTC</p>
---
layout: archive
title: Zulip Chat Archive
permalink: /stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html
---

<h2>Stream: <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/index.html">Backdrop</a></h2>
<h3>Topic: <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html">CSS & JS Load Location</a></h3>

<hr>

<base href="backdrop.zulipchat.com">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="225962623"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/225962623" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Phil Ward <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#225962623">(Feb 11 2021 at 08:56)</a>:</h4>
<p>Running across this issue: <a href="https://github.com/backdrop/backdrop-issues/issues/4942">https://github.com/backdrop/backdrop-issues/issues/4942</a> made me decide to go ahead and ask something that has been on my mind for a while. I mainly ask because I haven't dove into theming too heavily yet to make an assessment on my own, so I figure I would ask the experts.</p>
<p>Question is: what is Backdrop core doing about loading css and JS at the bottom of the page?</p>
<p>This topic is basically an absolute requirement these days and if it isn't already a thing, I would like to see Core split the loading into two areas: top and bottom so that contrib can make use of where their own files load logically.</p>
<p>Advagg has this ability but I refuse to use advagg for breaking more things than it's worth. Advagg also does not make it easy for contribs to move files around and expects the architect to be a master at knowing what will break and what won't if js or css is loaded at the bottom.</p>
<p>To move into the times, I feel like it would be worth it if Core made it a point to declare non-rendering and non-breaking files at the end, and extend this to allow and recommend that contribs do the same.</p>
<p>With the newest Google SEO changes coming late spring, top loading files will create low speed scores and ultimately drive SEO down for sites for not being "compliant".</p>
<p>What's the general consensus on this topic?</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/backdrop/backdrop-issues/issues/4942" style="background-image: url(https://avatars.githubusercontent.com/u/5283039?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/backdrop/backdrop-issues/issues/4942" title="Theme CSS loading in wrong order due to 'every_page_weight' and backdrop_css_alter() · Issue #4942 · backdrop/backdrop-issues">Theme CSS loading in wrong order due to 'every_page_weight' and backdrop_css_alter() · Issue #4942 · backdrop/backdrop-issues</a></div><div class="message_embed_description">Description of the bug This is in response to this issue. The problem results in theme CSS and JS being loaded out of order. The issue revolves around the key &#39;every_page_weight&#39;, which is ...</div></div></div>



<a name="225973979"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/225973979" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#225973979">(Feb 11 2021 at 10:53)</a>:</h4>
<p><span class="user-mention" data-user-id="330989">@Phil Ward</span> We have the option to specify 'header' or 'footer' in <a href="https://docs.backdropcms.org/api/backdrop/core%21includes%21common.inc/function/backdrop_add_js/1"><code>backdrop_add_js</code></a>. We don't seem to have the same for CSS though...</p>



<a name="225975566"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/225975566" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> findlabnet(Vladimir) <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#225975566">(Feb 11 2021 at 11:08)</a>:</h4>
<p><span class="user-mention" data-user-id="256607">@BWPanda</span>  CSS loaded after content can make sense?</p>



<a name="226036159"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226036159" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Phil Ward <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226036159">(Feb 11 2021 at 18:29)</a>:</h4>
<p><span class="user-mention" data-user-id="268468">@findlabnet(Vladimir)</span> so long as it is non-rendering related.</p>
<p>CSS can honestly be loaded anywhere, but if it is loaded last, it can make for an unpleasant viewing experience as the browser loads the page.</p>
<p>Usually your critical theme css needs to be at the top but it should only be a minimal subset of css to deal with that initial paint.</p>



<a name="226036713"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226036713" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Phil Ward <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226036713">(Feb 11 2021 at 18:32)</a>:</h4>
<p><span class="user-mention" data-user-id="256607">@BWPanda</span> thanks! And nice...</p>
<p>Yeah CSS should probably be included to offer this ability... Fonts are another great example of moving the CSS to the bottom.</p>



<a name="226038192"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226038192" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> findlabnet(Vladimir) <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226038192">(Feb 11 2021 at 18:43)</a>:</h4>
<p><span class="user-mention" data-user-id="330989">@Phil Ward</span> Thank you! Sorry for new question: what is "non-rendering related" CSS? So nice to learn new things!</p>



<a name="226038342"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226038342" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oadaeh (Jason Flatt) <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226038342">(Feb 11 2021 at 18:44)</a>:</h4>
<p><a href="https://docs.backdropcms.org/api/backdrop/core%21includes%21common.inc/function/backdrop_add_css/1">https://docs.backdropcms.org/api/backdrop/core%21includes%21common.inc/function/backdrop_add_css/1</a><br>
<a href="https://github.com/backdrop/backdrop/blob/ac819913fdb7aadcec9c7579fd33920327526792/core/includes/common.inc#L3315">https://github.com/backdrop/backdrop/blob/ac819913fdb7aadcec9c7579fd33920327526792/core/includes/common.inc#L3315</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/backdrop/backdrop/blob/ac819913fdb7aadcec9c7579fd33920327526792/core/includes/common.inc#L3315" style="background-image: url(https://avatars.githubusercontent.com/u/5283039?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/backdrop/backdrop/blob/ac819913fdb7aadcec9c7579fd33920327526792/core/includes/common.inc#L3315" title="backdrop/backdrop">backdrop/backdrop</a></div><div class="message_embed_description">Backdrop core code repository. Contribute to backdrop/backdrop development by creating an account on GitHub.</div></div></div>



<a name="226038800"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226038800" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Phil Ward <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226038800">(Feb 11 2021 at 18:48)</a>:</h4>
<p>Mainly stuff that would load to keep the page from jumping all around when it's first loading. Areas "below the fold". In other words, areas that are hidden when the page first loads. If all your tables are hidden when the page is first loading, then the CSS that makes them pretty could be added to the bottom of the page because it isn't ever shown on initial page load. That's just one example.</p>



<a name="226039161"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226039161" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Phil Ward <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226039161">(Feb 11 2021 at 18:51)</a>:</h4>
<p><span class="user-mention" data-user-id="256627">@oadaeh (Jason Flatt)</span> looks like that deals with the weighting but not the position? Am I looking at it right?</p>



<a name="226040012"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226040012" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oadaeh (Jason Flatt) <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226040012">(Feb 11 2021 at 18:56)</a>:</h4>
<p>I didn't actually read it, so I don't know.</p>



<a name="226043692"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226043692" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Herb <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226043692">(Feb 11 2021 at 19:20)</a>:</h4>
<p>Does the inline option mean it gets all printed in header of the doc?</p>



<a name="226045065"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226045065" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joseph Flatt <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226045065">(Feb 11 2021 at 19:29)</a>:</h4>
<p>When <code>$options['type'] = 'inline';</code> then Backdrop assumes the value of <code>$data</code> is the content of a CSS document and prints it directly to the page</p>



<a name="226046520"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226046520" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bugfolder <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226046520">(Feb 11 2021 at 19:38)</a>:</h4>
<p><span class="user-mention" data-user-id="263951">@jenlampton</span>, maintainer responded <a href="https://github.com/backdrop-contrib/token_filter/issues/3">here</a>, which was the module issue I linked to in the PR and transfer issue.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/backdrop-contrib/token_filter/issues/3" style="background-image: url(https://avatars.githubusercontent.com/u/7720679?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/backdrop-contrib/token_filter/issues/3" title="Call to nonexistent function token_get_entity_mapping() · Issue #3 · backdrop-contrib/token_filter">Call to nonexistent function token_get_entity_mapping() · Issue #3 · backdrop-contrib/token_filter</a></div><div class="message_embed_description">On line 39 of token_filter.module, there is a call to token_get_entity(). If this point is reached in the code, the module crashes because that function doesn&#39;t exist in the Backdrop version of...</div></div></div>



<a name="226046561"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226046561" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bugfolder <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226046561">(Feb 11 2021 at 19:39)</a>:</h4>
<p>TiA for doing the transfer!</p>



<a name="226046704"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226046704" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jenlampton <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226046704">(Feb 11 2021 at 19:40)</a>:</h4>
<p>Can you remove the bug-fix commit from the PR: <a href="https://github.com/backdrop-ops/contrib/issues/492">https://github.com/backdrop-ops/contrib/issues/492</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/backdrop-ops/contrib/issues/492" style="background-image: url(https://avatars.githubusercontent.com/u/8452564?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/backdrop-ops/contrib/issues/492" title="Take over as maintainer of Token Filter module · Issue #492 · backdrop-ops/contrib">Take over as maintainer of Token Filter module · Issue #492 · backdrop-ops/contrib</a></div><div class="message_embed_description">Per this issue, I would like to take over as maintainer of the Token Filter module. Here's the associated PR.</div></div></div>



<a name="226046744"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226046744" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jenlampton <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226046744">(Feb 11 2021 at 19:40)</a>:</h4>
<p>I'd like to update the readme and grant you permission to merge the bug-fix commit :)</p>



<a name="226046847"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226046847" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joseph Flatt <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226046847">(Feb 11 2021 at 19:41)</a>:</h4>
<p>One thing to keep in mind when changing the CSS loading location is that any module that puts CSS inline will probably be broken by this because it changes the override order.</p>



<a name="226053399"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/CSS%20%26%20JS%20Load%20Location/near/226053399" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Phil Ward <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/CSS.20.26.20JS.20Load.20Location.html#226053399">(Feb 11 2021 at 20:32)</a>:</h4>
<p>Yeah... I get why it's "best practice" to move all of this stuff to the bottom, but man does it create a lot of headaches...</p>
<p>There needs to be some sort of library where JS and CSS can be put through a rendering process and it recreates JS and CSS files on the fly based on whether it needs to load at the top or can be relegated to the bottom. Completely out of scope for Backdrop, it's just a fun thought.</p>



{% endraw %}

<hr><p>Last updated: Apr 05 2021 at 23:47 UTC</p>
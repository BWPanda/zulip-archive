[
    {
        "content": "<p>Anyone able to help me debug a password reset script?</p>",
        "id": 221090332,
        "sender_full_name": "BWPanda",
        "timestamp": 1609188572
    },
    {
        "content": "<p>If so, please try running this script from the command line:</p>\n<div class=\"codehilite\" data-code-language=\"PHP\"><pre><span></span><code><span class=\"x\">#!/usr/bin/env php</span>\n<span class=\"cp\">&lt;?php</span>\n<span class=\"sd\">/**</span>\n<span class=\"sd\"> * Reset User 1's password.</span>\n<span class=\"sd\"> */</span>\n\n<span class=\"c1\">// Bootstrap Backdrop.</span>\n<span class=\"nb\">define</span><span class=\"p\">(</span><span class=\"s1\">'BACKDROP_ROOT'</span><span class=\"p\">,</span> <span class=\"s1\">'/path/to/backdrop'</span><span class=\"p\">);</span>\n<span class=\"k\">require_once</span> <span class=\"nx\">BACKDROP_ROOT</span> <span class=\"o\">.</span> <span class=\"s1\">'/core/includes/bootstrap.inc'</span><span class=\"p\">;</span>\n<span class=\"nx\">backdrop_bootstrap</span><span class=\"p\">(</span><span class=\"nx\">BACKDROP_BOOTSTRAP_FULL</span><span class=\"p\">);</span>\n\n<span class=\"c1\">// Reset password.</span>\n<span class=\"nv\">$password</span> <span class=\"o\">=</span> <span class=\"s1\">'123456789'</span><span class=\"p\">;</span>\n<span class=\"nv\">$user</span> <span class=\"o\">=</span> <span class=\"nx\">user_load</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">);</span>\n<span class=\"nv\">$user</span><span class=\"o\">-&gt;</span><span class=\"na\">pass</span> <span class=\"o\">=</span> <span class=\"nv\">$password</span><span class=\"p\">;</span>\n<span class=\"nx\">user_save</span><span class=\"p\">(</span><span class=\"nv\">$user</span><span class=\"p\">);</span>\n\n<span class=\"c1\">// Flush caches.</span>\n<span class=\"nx\">backdrop_flush_all_caches</span><span class=\"p\">();</span>\n</code></pre></div>\n<p>Just change the <code>/path/to/backdrop</code> to match your environment. And obviously don't do this on a live/production site.</p>",
        "id": 221090456,
        "sender_full_name": "BWPanda",
        "timestamp": 1609188721
    },
    {
        "content": "<p>I'm trying to do this in Tugboat, and it doesn't seem to progress past the bootstrap part. Not sure what's going on...</p>",
        "id": 221090510,
        "sender_full_name": "BWPanda",
        "timestamp": 1609188769
    },
    {
        "content": "<p>Is User/Entity module available at that point?</p>",
        "id": 221090774,
        "sender_full_name": "docwilmot",
        "timestamp": 1609189074
    },
    {
        "content": "<p>In Tugboat? Should be. It's run at the end of the setup steps which include importing an existing DB, etc. The site works otherwise, I just can't login.</p>",
        "id": 221090867,
        "sender_full_name": "BWPanda",
        "timestamp": 1609189133
    },
    {
        "content": "<p>If people confirm this script works for them, then I know it's something specific to the Tugboat setup.</p>",
        "id": 221090892,
        "sender_full_name": "BWPanda",
        "timestamp": 1609189162
    },
    {
        "content": "<p>Ok, I think I figured it out - it seems that <code>define('BACKDROP_ROOT', '/path/to/backdrop');</code> is not enough. Other parts of Backdrop assume that they're running from the root directory and so just use <code>.</code> as the root. So the solution is to first <code>cd /path/to/backdrop</code> then run the script from there (e.g. <code>../reset.sh</code>).</p>",
        "id": 221100553,
        "sender_full_name": "BWPanda",
        "timestamp": 1609199695
    },
    {
        "content": "<p>Here's the results of my efforts: <a href=\"https://github.com/backdrop-ops/forum.backdropcms.org/issues/105\">https://github.com/backdrop-ops/forum.backdropcms.org/issues/105</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/backdrop-ops/forum.backdropcms.org/issues/105\" style=\"background-image: url(https://avatars3.githubusercontent.com/u/8452564?s=400&amp;v=4)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/backdrop-ops/forum.backdropcms.org/issues/105\" title=\"Set up Tugboat for testing PRs · Issue #105 · backdrop-ops/forum.backdropcms.org\">Set up Tugboat for testing PRs · Issue #105 · backdrop-ops/forum.backdropcms.org</a></div><div class=\"message_embed_description\">In today&#39;s meetings we discussed setting up a tugboat workflow where each PR against backdropcms.org could be tested in a sandbox before merge. To do this, someone will need to look at the way ...</div></div></div>",
        "id": 221102117,
        "sender_full_name": "BWPanda",
        "timestamp": 1609201752
    },
    {
        "content": "<p>Wow! Thanks for working on that <span class=\"user-mention\" data-user-id=\"256607\">@BWPanda</span>++</p>",
        "id": 221107712,
        "sender_full_name": "klonos",
        "timestamp": 1609210076
    },
    {
        "content": "<p><strong>bwpanda</strong> Props to you for all your hard work. (Karma: 25)</p>",
        "id": 221107713,
        "sender_full_name": "Dragonbot",
        "timestamp": 1609210076
    },
    {
        "content": "<p>Is this for running tests on PRs like Zen does?</p>",
        "id": 221108061,
        "sender_full_name": "docwilmot",
        "timestamp": 1609210656
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256757\">@docwilmot</span> No, just for manualy testing of PRs on the forum site.</p>",
        "id": 221108112,
        "sender_full_name": "BWPanda",
        "timestamp": 1609210686
    },
    {
        "content": "<p>If/when it's merged and we decide it works well, we can do the same for <a href=\"http://B.org\">B.org</a> and the API sites.</p>",
        "id": 221108116,
        "sender_full_name": "BWPanda",
        "timestamp": 1609210727
    },
    {
        "content": "<p>So then people can submit PRs for new features, bug fixes, etc., and then it's easier for others to test since a sandbox is spun up automatically.</p>",
        "id": 221108133,
        "sender_full_name": "BWPanda",
        "timestamp": 1609210772
    },
    {
        "content": "<p>Cool. Does it spoof users and content?</p>",
        "id": 221108201,
        "sender_full_name": "docwilmot",
        "timestamp": 1609210848
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256757\">@docwilmot</span> the db that it pulls is sanitized (mangled usernames and emails - <span class=\"user-mention\" data-user-id=\"256583\">@Geoff St. Pierre (serundeputy)</span> set that up for us IIRC - a fresh sanitized db is created daily/nightly), but content is the same as the actual site.</p>",
        "id": 221108338,
        "sender_full_name": "klonos",
        "timestamp": 1609211053
    },
    {
        "content": "<p>Yep, so the DB and files directory for all <a href=\"http://B.org\">B.org</a> sites are backed up daily here: <a href=\"https://sanitize.backdropcms.org/\">https://sanitize.backdropcms.org/</a> The DB is sanitised first as <span class=\"user-mention\" data-user-id=\"256729\">@klonos</span> mentioned. My PR pulls the latest copy of the DB and files dir and uses them to setup a copy of the site. It then resets User 1's password so users can actually login and test whatever the PR is for.</p>",
        "id": 221108411,
        "sender_full_name": "BWPanda",
        "timestamp": 1609211187
    },
    {
        "content": "<p>Brilliant.</p>",
        "id": 221108480,
        "sender_full_name": "docwilmot",
        "timestamp": 1609211318
    },
    {
        "content": "<p>Next is also lando recipes that do all that locally <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 221111126,
        "sender_full_name": "klonos",
        "timestamp": 1609216361
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256729\">@klonos</span> You mean <a href=\"https://github.com/backdrop-ops/backdropcms.org/issues/725\">https://github.com/backdrop-ops/backdropcms.org/issues/725</a> ? Already done! <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/backdrop-ops/backdropcms.org/issues/725\" style=\"background-image: url(https://avatars3.githubusercontent.com/u/8452564?s=400&amp;v=4)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/backdrop-ops/backdropcms.org/issues/725\" title=\"Make it easier to pull in DB/files in Lando · Issue #725 · backdrop-ops/backdropcms.org\">Make it easier to pull in DB/files in Lando · Issue #725 · backdrop-ops/backdropcms.org</a></div><div class=\"message_embed_description\">We have the Sanitize site providing DBs and Files for Backdrop sites, but it&#39;s still a bit tricky/involved getting them working in Lando. I propose updating the Lando script to provide commands...</div></div></div>",
        "id": 221116375,
        "sender_full_name": "BWPanda",
        "timestamp": 1609225639
    },
    {
        "content": "<p>I meant that, but for all our sites <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 221117017,
        "sender_full_name": "klonos",
        "timestamp": 1609226874
    },
    {
        "content": "<p><a href=\"https://github.com/backdrop-ops/api.backdropcms.org/issues/91\">https://github.com/backdrop-ops/api.backdropcms.org/issues/91</a> has been merged too</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/backdrop-ops/api.backdropcms.org/issues/91\" style=\"background-image: url(https://avatars3.githubusercontent.com/u/8452564?s=400&amp;v=4)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/backdrop-ops/api.backdropcms.org/issues/91\" title=\"Add Lando tooling to allow pulling the latest DB/files · Issue #91 · backdrop-ops/api.backdropcms.org\">Add Lando tooling to allow pulling the latest DB/files · Issue #91 · backdrop-ops/api.backdropcms.org</a></div><div class=\"message_embed_description\">I'd like to do the same here as we did in backdrop-ops/backdropcms.org#678 - adding a Lando command for pulling in and setting up the latest API website DB/files.</div></div></div>",
        "id": 221117069,
        "sender_full_name": "BWPanda",
        "timestamp": 1609226933
    },
    {
        "content": "<p>As has <a href=\"https://github.com/backdrop-ops/forum.backdropcms.org/issues/111\">https://github.com/backdrop-ops/forum.backdropcms.org/issues/111</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/backdrop-ops/forum.backdropcms.org/issues/111\" style=\"background-image: url(https://avatars3.githubusercontent.com/u/8452564?s=400&amp;v=4)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/backdrop-ops/forum.backdropcms.org/issues/111\" title=\"Update Lando config to easily update DB &amp; files · Issue #111 · backdrop-ops/forum.backdropcms.org\">Update Lando config to easily update DB &amp; files · Issue #111 · backdrop-ops/forum.backdropcms.org</a></div><div class=\"message_embed_description\">As per backdrop-ops/backdropcms.org#725 and backdrop-ops/api.backdropcms.org#91, let&#39;s make it easier for people to spin up forum sites on their local machine to help with bug fixing and featur...</div></div></div>",
        "id": 221117073,
        "sender_full_name": "BWPanda",
        "timestamp": 1609226960
    },
    {
        "content": "<p>Absolutely great! <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> ...I must have missed those.</p>",
        "id": 221117196,
        "sender_full_name": "klonos",
        "timestamp": 1609227174
    }
]
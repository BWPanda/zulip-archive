---
layout: archive
title: Zulip Chat Archive
permalink: /stream/218635-Backdrop/topic/Password.20reset.20script.html
---

<h2>Stream: <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/index.html">Backdrop</a></h2>
<h3>Topic: <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html">Password reset script</a></h3>

<hr>

<base href="backdrop.zulipchat.com">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="221090332"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221090332" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221090332">(Dec 28 2020 at 20:49)</a>:</h4>
<p>Anyone able to help me debug a password reset script?</p>



<a name="221090456"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221090456" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221090456">(Dec 28 2020 at 20:52)</a>:</h4>
<p>If so, please try running this script from the command line:</p>
<div class="codehilite" data-code-language="PHP"><pre><span></span><code><span class="x">#!/usr/bin/env php</span>
<span class="cp">&lt;?php</span>
<span class="sd">/**</span>
<span class="sd"> * Reset User 1's password.</span>
<span class="sd"> */</span>

<span class="c1">// Bootstrap Backdrop.</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">'BACKDROP_ROOT'</span><span class="p">,</span> <span class="s1">'/path/to/backdrop'</span><span class="p">);</span>
<span class="k">require_once</span> <span class="nx">BACKDROP_ROOT</span> <span class="o">.</span> <span class="s1">'/core/includes/bootstrap.inc'</span><span class="p">;</span>
<span class="nx">backdrop_bootstrap</span><span class="p">(</span><span class="nx">BACKDROP_BOOTSTRAP_FULL</span><span class="p">);</span>

<span class="c1">// Reset password.</span>
<span class="nv">$password</span> <span class="o">=</span> <span class="s1">'123456789'</span><span class="p">;</span>
<span class="nv">$user</span> <span class="o">=</span> <span class="nx">user_load</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nv">$user</span><span class="o">-&gt;</span><span class="na">pass</span> <span class="o">=</span> <span class="nv">$password</span><span class="p">;</span>
<span class="nx">user_save</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span>

<span class="c1">// Flush caches.</span>
<span class="nx">backdrop_flush_all_caches</span><span class="p">();</span>
</code></pre></div>
<p>Just change the <code>/path/to/backdrop</code> to match your environment. And obviously don't do this on a live/production site.</p>



<a name="221090510"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221090510" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221090510">(Dec 28 2020 at 20:52)</a>:</h4>
<p>I'm trying to do this in Tugboat, and it doesn't seem to progress past the bootstrap part. Not sure what's going on...</p>



<a name="221090774"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221090774" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> docwilmot <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221090774">(Dec 28 2020 at 20:57)</a>:</h4>
<p>Is User/Entity module available at that point?</p>



<a name="221090867"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221090867" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221090867">(Dec 28 2020 at 20:58)</a>:</h4>
<p>In Tugboat? Should be. It's run at the end of the setup steps which include importing an existing DB, etc. The site works otherwise, I just can't login.</p>



<a name="221090892"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221090892" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221090892">(Dec 28 2020 at 20:59)</a>:</h4>
<p>If people confirm this script works for them, then I know it's something specific to the Tugboat setup.</p>



<a name="221100553"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221100553" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221100553">(Dec 28 2020 at 23:54)</a>:</h4>
<p>Ok, I think I figured it out - it seems that <code>define('BACKDROP_ROOT', '/path/to/backdrop');</code> is not enough. Other parts of Backdrop assume that they're running from the root directory and so just use <code>.</code> as the root. So the solution is to first <code>cd /path/to/backdrop</code> then run the script from there (e.g. <code>../reset.sh</code>).</p>



<a name="221102117"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221102117" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221102117">(Dec 29 2020 at 00:29)</a>:</h4>
<p>Here's the results of my efforts: <a href="https://github.com/backdrop-ops/forum.backdropcms.org/issues/105">https://github.com/backdrop-ops/forum.backdropcms.org/issues/105</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/backdrop-ops/forum.backdropcms.org/issues/105" style="background-image: url(https://avatars3.githubusercontent.com/u/8452564?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/backdrop-ops/forum.backdropcms.org/issues/105" title="Set up Tugboat for testing PRs · Issue #105 · backdrop-ops/forum.backdropcms.org">Set up Tugboat for testing PRs · Issue #105 · backdrop-ops/forum.backdropcms.org</a></div><div class="message_embed_description">In today&#39;s meetings we discussed setting up a tugboat workflow where each PR against backdropcms.org could be tested in a sandbox before merge. To do this, someone will need to look at the way ...</div></div></div>



<a name="221107712"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221107712" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> klonos <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221107712">(Dec 29 2020 at 02:47)</a>:</h4>
<p>Wow! Thanks for working on that <span class="user-mention" data-user-id="256607">@BWPanda</span>++</p>



<a name="221107713"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221107713" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dragonbot <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221107713">(Dec 29 2020 at 02:47)</a>:</h4>
<p><strong>bwpanda</strong> Props to you for all your hard work. (Karma: 25)</p>



<a name="221108061"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221108061" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> docwilmot <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221108061">(Dec 29 2020 at 02:57)</a>:</h4>
<p>Is this for running tests on PRs like Zen does?</p>



<a name="221108112"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221108112" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221108112">(Dec 29 2020 at 02:58)</a>:</h4>
<p><span class="user-mention" data-user-id="256757">@docwilmot</span> No, just for manualy testing of PRs on the forum site.</p>



<a name="221108116"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221108116" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221108116">(Dec 29 2020 at 02:58)</a>:</h4>
<p>If/when it's merged and we decide it works well, we can do the same for <a href="http://B.org">B.org</a> and the API sites.</p>



<a name="221108133"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221108133" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221108133">(Dec 29 2020 at 02:59)</a>:</h4>
<p>So then people can submit PRs for new features, bug fixes, etc., and then it's easier for others to test since a sandbox is spun up automatically.</p>



<a name="221108201"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221108201" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> docwilmot <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221108201">(Dec 29 2020 at 03:00)</a>:</h4>
<p>Cool. Does it spoof users and content?</p>



<a name="221108338"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221108338" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> klonos <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221108338">(Dec 29 2020 at 03:04)</a>:</h4>
<p><span class="user-mention" data-user-id="256757">@docwilmot</span> the db that it pulls is sanitized (mangled usernames and emails - <span class="user-mention" data-user-id="256583">@Geoff St. Pierre (serundeputy)</span> set that up for us IIRC - a fresh sanitized db is created daily/nightly), but content is the same as the actual site.</p>



<a name="221108411"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221108411" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221108411">(Dec 29 2020 at 03:06)</a>:</h4>
<p>Yep, so the DB and files directory for all <a href="http://B.org">B.org</a> sites are backed up daily here: <a href="https://sanitize.backdropcms.org/">https://sanitize.backdropcms.org/</a> The DB is sanitised first as <span class="user-mention" data-user-id="256729">@klonos</span> mentioned. My PR pulls the latest copy of the DB and files dir and uses them to setup a copy of the site. It then resets User 1's password so users can actually login and test whatever the PR is for.</p>



<a name="221108480"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221108480" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> docwilmot <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221108480">(Dec 29 2020 at 03:08)</a>:</h4>
<p>Brilliant.</p>



<a name="221111126"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221111126" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> klonos <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221111126">(Dec 29 2020 at 04:32)</a>:</h4>
<p>Next is also lando recipes that do all that locally <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="221116375"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221116375" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221116375">(Dec 29 2020 at 07:07)</a>:</h4>
<p><span class="user-mention" data-user-id="256729">@klonos</span> You mean <a href="https://github.com/backdrop-ops/backdropcms.org/issues/725">https://github.com/backdrop-ops/backdropcms.org/issues/725</a> ? Already done! <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/backdrop-ops/backdropcms.org/issues/725" style="background-image: url(https://avatars3.githubusercontent.com/u/8452564?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/backdrop-ops/backdropcms.org/issues/725" title="Make it easier to pull in DB/files in Lando · Issue #725 · backdrop-ops/backdropcms.org">Make it easier to pull in DB/files in Lando · Issue #725 · backdrop-ops/backdropcms.org</a></div><div class="message_embed_description">We have the Sanitize site providing DBs and Files for Backdrop sites, but it&#39;s still a bit tricky/involved getting them working in Lando. I propose updating the Lando script to provide commands...</div></div></div>



<a name="221117017"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221117017" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> klonos <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221117017">(Dec 29 2020 at 07:27)</a>:</h4>
<p>I meant that, but for all our sites <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="221117069"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221117069" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221117069">(Dec 29 2020 at 07:28)</a>:</h4>
<p><a href="https://github.com/backdrop-ops/api.backdropcms.org/issues/91">https://github.com/backdrop-ops/api.backdropcms.org/issues/91</a> has been merged too</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/backdrop-ops/api.backdropcms.org/issues/91" style="background-image: url(https://avatars3.githubusercontent.com/u/8452564?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/backdrop-ops/api.backdropcms.org/issues/91" title="Add Lando tooling to allow pulling the latest DB/files · Issue #91 · backdrop-ops/api.backdropcms.org">Add Lando tooling to allow pulling the latest DB/files · Issue #91 · backdrop-ops/api.backdropcms.org</a></div><div class="message_embed_description">I'd like to do the same here as we did in backdrop-ops/backdropcms.org#678 - adding a Lando command for pulling in and setting up the latest API website DB/files.</div></div></div>



<a name="221117073"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221117073" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BWPanda <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221117073">(Dec 29 2020 at 07:29)</a>:</h4>
<p>As has <a href="https://github.com/backdrop-ops/forum.backdropcms.org/issues/111">https://github.com/backdrop-ops/forum.backdropcms.org/issues/111</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/backdrop-ops/forum.backdropcms.org/issues/111" style="background-image: url(https://avatars3.githubusercontent.com/u/8452564?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/backdrop-ops/forum.backdropcms.org/issues/111" title="Update Lando config to easily update DB &amp; files · Issue #111 · backdrop-ops/forum.backdropcms.org">Update Lando config to easily update DB &amp; files · Issue #111 · backdrop-ops/forum.backdropcms.org</a></div><div class="message_embed_description">As per backdrop-ops/backdropcms.org#725 and backdrop-ops/api.backdropcms.org#91, let&#39;s make it easier for people to spin up forum sites on their local machine to help with bug fixing and featur...</div></div></div>



<a name="221117196"></a>
<h4><a href="backdrop.zulipchat.com#narrow/stream/218635-Backdrop/topic/Password%20reset%20script/near/221117196" class="zl"><img src="https://bwpanda.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> klonos <a href="https://bwpanda.github.io/zulip-archive/stream/218635-Backdrop/topic/Password.20reset.20script.html#221117196">(Dec 29 2020 at 07:32)</a>:</h4>
<p>Absolutely great! <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> ...I must have missed those.</p>



{% endraw %}

<hr><p>Last updated: Apr 05 2021 at 23:47 UTC</p>